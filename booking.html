<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="title.booking">Запись</title>

  <link rel="stylesheet" href="assets/styles.css" />
  <script defer src="assets/config.js"></script>
  <script defer src="assets/i18n.js"></script>
  <script defer src="assets/calendar.js"></script>
</head>
<body>
  <header class="site-header">
    <nav class="nav">
      <a href="index.html" data-i18n="nav.home">Главная</a>
      <a href="about.html" data-i18n="nav.about">Обо мне</a>
      <a href="rules.html" data-i18n="nav.rules">Правила</a>
      <a href="booking.html" class="is-active" data-i18n="nav.booking">Запись</a>

      <div class="lang-switch">
        <button data-switch-lang="ru">RU</button>
        <button data-switch-lang="lv">LV</button>
        <button data-switch-lang="en">EN</button>
      </div>
    </nav>
  </header>

  <main class="container">
    <h1 data-i18n="booking.title">Запись на приём</h1>
    <p class="muted" data-i18n="booking.steps">
      1) Выберите дату и время. 2) Заполните контактные данные. 3) Нажмите «Забронировать».
    </p>

    <div class="two-col">
      <!-- ЛЕВАЯ КОЛОНКА: календарь + слоты + ближайшая -->
      <section class="card card--calendar" id="calendar-card">
        <!-- Ближайшая запись — статичное место, не дёргает верстку -->
        <div class="next-slot-row">
          <span class="muted" data-i18n="nextslot.title">Ближайшая запись:</span>
          <strong id="next-slot-date"></strong><span class="comma" aria-hidden="true">,</span>
          <strong id="next-slot-time"></strong>
          <button id="next-slot-btn" class="btn btn-primary btn-sm" data-i18n="nextslot.cta">Перейти</button>
        </div>

        <div class="calendar-head">
          <div class="month-switch">
            <button id="cal-prev" class="btn-circle" aria-label="Prev">←</button>
            <button id="cal-next" class="btn-circle" aria-label="Next">→</button>
          </div>
          <h2 id="cal-month" class="month-title">—</h2>
        </div>

        <!-- Слоты выбранного дня (над календарём) -->
        <div id="slot-times" class="slot-times" aria-live="polite"></div>

        <div class="weekdays">
          <span data-i18n="cal.mon">Пн</span>
          <span data-i18n="cal.tue">Вт</span>
          <span data-i18n="cal.wed">Ср</span>
          <span data-i18n="cal.thu">Чт</span>
          <span data-i18n="cal.fri">Пт</span>
          <span data-i18n="cal.sat">Сб</span>
          <span data-i18n="cal.sun">Вс</span>
        </div>

        <div id="cal-grid" class="cal-grid"></div>

        <p class="muted mt-16" data-i18n="booking.legend">
          • Точка под датой — есть свободное время. Нажмите дату, затем выберите время. После бронирования запись появится в вашем календаре.
        </p>
      </section>

      <!-- ПРАВАЯ КОЛОНКА: форма -->
      <section class="card card--form">
        <form id="book-form" novalidate>
          <div class="row2">
            <label>
              <span data-i18n="form.name">Имя и фамилия</span>
              <input id="form-name" class="input" type="text" required />
            </label>
            <label>
              <span>E-mail</span>
              <input id="form-email" class="input" type="email" required />
            </label>
          </div>

          <div class="row2">
            <label>
              <span data-i18n="form.phone">Телефон</span>
              <input id="form-phone" class="input" type="tel" placeholder="+371 …" required />
            </label>
            <label>
              <span data-i18n="form.mode">Формат визита</span>
              <select id="form-mode" class="input">
                <option value="in_person" data-i18n="form.mode.in_person">Очный визит</option>
                <option value="online" data-i18n="form.mode.online">Онлайн</option>
              </select>
            </label>
          </div>

          <div class="row2">
            <label>
              <span data-i18n="form.date">Дата</span>
              <input id="form-date" class="input" type="text" readonly />
            </label>
            <label>
              <span data-i18n="form.time">Время</span>
              <input id="form-time" class="input" type="text" readonly />
            </label>
          </div>

          <label>
            <span data-i18n="form.notes">Комментарий</span>
            <textarea id="form-notes" class="input" rows="5" placeholder="Коротко о запросе (до 600 символов)"></textarea>
          </label>

          <div class="actions">
            <button type="submit" class="btn btn-primary" data-i18n="form.submit">Забронировать</button>
          </div>
        </form>
      </section>
    </div>
  </main>
</body>
</html>
